{"version":3,"sources":["services/julkaisut.js","componets/MainSection.js","componets/Navbar.js","componets/LoginForm.js","services/login.js","App.js","index.js"],"names":["baseUrl","token","getAll","axios","get","then","response","data","create","newObject","a","config","headers","Authorization","request","post","update","id","put","remove","delete","setToken","newToken","Julkaisu","posts","likePost","className","user","username","content","onClick","likes","AllJulkaisut","removeJulkaisu","map","JulkaisuForm","handleChange","addJulkaisu","logOut","maxLength","rows","cols","type","value","onChange","placeholder","MainSection","setUser","useState","setPosts","setContent","useEffect","postService","initialPosts","event","target","preventDefault","julkaisuObject","date","Date","toISOString","newPosts","concat","window","localStorage","removeItem","find","n","console","log","likedPost","updatedPost","DropdownMenu","DropdownItem","props","leftIcon","children","rightIcon","NavItem","isOpen","setIsOpen","icon","NavToTop","Navbar","Navigation","scroll","scrollToTop","LoginForm","handleLogin","password","setPassword","setUsername","onSubmit","name","login","credentials","App","loggedUserJSON","getItem","JSON","parse","loginService","setItem","stringify","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d60caf74.chunk.js","sourcesContent":["import axios from \"axios\";\r\nconst baseUrl = \"/api/julkaisut\"; \r\n\r\nlet token = null\r\n\r\nconst setToken = newToken => {\r\n  token = `bearer ${newToken}`\r\n}\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = async newObject => {\r\n  const config = {\r\n    headers: {Authorization: token}\r\n  }\r\n  const request = axios.post(baseUrl, newObject, config);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\n/* eslint import/no-anonymous-default-export: [2, {\"allowObject\": true}] */\r\nexport default { getAll, create, update, remove, setToken };\r\n","import React, { useState, useEffect } from \"react\";\r\nimport postService from \"./../services/julkaisut\";\r\nimport \"./../index.css\";\r\nimport { FaHeart } from \"react-icons/fa\";\r\n\r\nconst Julkaisu = ({ posts, likePost }) => {\r\n  return (\r\n    <div className=\"julkaisu\">\r\n      <div className=\"content\">\r\n        <h1 className=\"user\">{posts.user.username}</h1>\r\n        <div className=\"contenttext\">\r\n          <p>{posts.content} </p>\r\n        </div>\r\n        <div className=\"buttons\">\r\n          <FaHeart className=\"likeButton\" onClick={likePost} />\r\n          {posts.likes} likes\r\n          <button className=\"viewButton\">View</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AllJulkaisut = ({ posts, likePost, removeJulkaisu }) => {\r\n  return (\r\n    <div className=\"julkaisut\">\r\n      {posts.map((a) => (\r\n        <Julkaisu\r\n          likePost={() => likePost(a.id)}\r\n          removeJulkaisu={() => removeJulkaisu(a.id)}\r\n          key={a.id}\r\n          posts={a}\r\n        ></Julkaisu>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n\r\nconst JulkaisuForm = ({ content, handleChange, addJulkaisu, user, logOut }) => {\r\n  return (\r\n    <div className=\"formContainer\">\r\n      <h1 className=\"formHeader\">Hi, {user.username} !</h1>\r\n      <form className=\"formJulkaisu\">\r\n        <textarea\r\n          maxLength=\"200\"\r\n          rows=\"5\"\r\n          cols=\"30\"\r\n          className=\"inputForm\"\r\n          type=\"text\"\r\n          value={content}\r\n          onChange={handleChange}\r\n          placeholder=\"Write text here\"\r\n        ></textarea>\r\n        <div>\r\n          <button className=\"julkaisuButton\" onClick={addJulkaisu}>\r\n            Lisaa\r\n          </button>\r\n          <button className=\"logOutButton\" onClick={logOut}>\r\n            log out\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction MainSection({user, setUser}) {\r\n  const [posts, setPosts] = useState([]);\r\n  const [content, setContent] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    postService.getAll().then((initialPosts) => {\r\n      setPosts(initialPosts);\r\n    });\r\n  }, []);\r\n\r\n  const likePost = (id) => {\r\n    const post = posts.find((n) => n.id === id);\r\n    console.log(post);\r\n    const likes = post.likes + 1;\r\n    console.log(likes);\r\n    const likedPost = {\r\n      content: post.content,\r\n      date: new Date().toISOString(),\r\n      likes: likes,\r\n    };\r\n\r\n    postService.update(id, likedPost).then((updatedPost) => {\r\n      postService.getAll().then((updatedPost) => {\r\n        setPosts(updatedPost);\r\n      });\r\n    });\r\n  };\r\n\r\n  const addJulkaisu = (event) => {\r\n    event.preventDefault();\r\n    const julkaisuObject = {\r\n      content: content,\r\n      date: new Date().toISOString(),\r\n      likes: 0,\r\n    };\r\n    postService.create(julkaisuObject).then((newPosts) => {\r\n      setPosts(posts.concat(newPosts));\r\n      setContent(\"\");\r\n    });\r\n  };\r\n\r\n  const handleChange = (event) => {\r\n    setContent(event.target.value);\r\n  };\r\n\r\n  const logOut = (event) => {\r\n    event.preventDefault();\r\n\t\twindow.localStorage.removeItem(\"loggedSomeappUser\");\r\n    setUser(null)\r\n  }\r\n\r\n  const removeJulkaisu = (id) => {\r\n    postService.remove(id).then((newPosts) => {\r\n      postService.getAll().then((newPosts) => {\r\n        setPosts(newPosts);\r\n      });\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"main\">\r\n      <JulkaisuForm\r\n        content={content}\r\n        handleChange={handleChange}\r\n        addJulkaisu={addJulkaisu}\r\n        user={user}\r\n        logOut={logOut}\r\n      />\r\n      <AllJulkaisut\r\n        posts={posts}\r\n        likePost={likePost}\r\n        removeJulkaisu={removeJulkaisu}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MainSection;\r\n","import React, {useState} from \"react\"\r\nimport {FaArrowUp, FaBars} from \"react-icons/fa\"\r\nimport {FiSettings, FiLogOut} from \"react-icons/fi\"\r\nimport {BiRightArrow} from \"react-icons/bi\"\r\nimport { animateScroll as scroll} from \"react-scroll\"\r\n\r\nfunction DropdownMenu(){\r\n\r\n    const handleLogOut = () => {\r\n        console.log(\"Logged out\");\r\n    }\r\n\r\n    function DropdownItem(props){\r\n        return(\r\n            <p className=\"menuitem\">\r\n                <span className=\"dropdownIcon\">{props.leftIcon}</span>\r\n                {props.children}\r\n                <span className=\"dropdownIcon\">{props.rightIcon}</span>\r\n                </p>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"dropdown\">\r\n            <DropdownItem leftIcon={<FiSettings/>} rightIcon={<BiRightArrow/>}>Settings</DropdownItem>\r\n            <DropdownItem onClick={handleLogOut} leftIcon={<FiLogOut/>} rightIcon={<BiRightArrow/>}>Log out</DropdownItem>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction NavItem(props){\r\n\r\nconst [isOpen, setIsOpen] = useState(false)\r\n\r\n    return (\r\n        <li className=\"navitem\">\r\n            <p className=\"iconbutton\" onClick={()=>setIsOpen(!isOpen)}>\r\n                {props.icon}\r\n            </p>\r\n           {isOpen ? <DropdownMenu/>:<div></div>}\r\n        </li>\r\n    )\r\n}\r\n\r\nfunction NavToTop(props){\r\n    \r\n        return (\r\n            <li className=\"navitem\">\r\n                <p className=\"iconbutton\" onClick={props.event}>\r\n                    {props.icon}\r\n                </p>\r\n              \r\n            </li>\r\n        )\r\n    }\r\n\r\nfunction Navbar (props) {\r\n\r\n    return (\r\n       <nav className=\"nav\">\r\n           <ul className=\"navnav\">\r\n                {props.children}\r\n           </ul>\r\n       </nav>\r\n    )\r\n    \r\n}\r\n\r\nfunction Navigation (){\r\n\r\n    const toUp = () => {\r\n        scroll.scrollToTop()\r\n    }\r\n\r\n\r\n    return(\r\n       <Navbar>         \r\n            <NavItem icon={<FaBars/>}/>  \r\n            <NavToTop icon={<FaArrowUp/>} event={toUp}/> \r\n       </Navbar> \r\n    )\r\n}\r\n\r\n//export default NavItem\r\nexport default Navigation","import React from \"react\";\r\n\r\nconst LoginForm = ({\r\n  handleLogin,\r\n  password,\r\n  username,\r\n  setPassword,\r\n  setUsername,\r\n}) => {\r\n  return (\r\n    <div>\r\n      <h1>Notes</h1>\r\n      <h2>Login</h2>\r\n      <form onSubmit={handleLogin}>\r\n        <div>\r\n          username\r\n          <input\r\n            type=\"text\"\r\n            value={username}\r\n            name=\"Username\"\r\n            onChange={({ target }) => setUsername(target.value)}\r\n          />\r\n        </div>\r\n        <div>\r\n          password\r\n          <input\r\n            type=\"password\"\r\n            value={password}\r\n            name=\"Password\"\r\n            onChange={({ target }) => setPassword(target.value)}\r\n          />\r\n        </div>\r\n        <button type=\"submit\">login</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginForm;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/login\";\r\n\r\nconst login = async (credentials) => {\r\n  const response = await axios.post(baseUrl, credentials);\r\n  return response.data;\r\n};\r\n\r\nexport default login;\r\n","import React, { useState, useEffect } from \"react\";\nimport MainSection from \"./componets/MainSection\";\nimport Navigation from \"./componets/Navbar\";\nimport LoginForm from \"./componets/LoginForm\";\nimport loginService from \"./services/login\";\nimport postService from \"./services/julkaisut\";\n\nfunction App() {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem(\"loggedSomeappUser\");\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON);\n      setUser(user);\n      postService.setToken(user.token);\n    }\n  }, []);\n\n  const handleLogin = async (event) => {\n    event.preventDefault();\n\n    try {\n      const user = await loginService.login({\n        username,\n        password,\n      });\n      window.localStorage.setItem(\"loggedSomeappUser\", JSON.stringify(user));\n      postService.setToken(user.token);\n      setUser(user);\n      setUsername(\"\");\n      setPassword(\"\");\n    } catch (exception) {\n      console.log(\"Wrong credentials\");\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      {user ? (\n        <div>\n          <Navigation />\n          <MainSection user={user} setUser={setUser} />\n        </div>\n      ) : (\n        <LoginForm\n          handleLogin={handleLogin}\n          password={password}\n          username={username}\n          setPassword={setPassword}\n          setUsername={setUsername}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}