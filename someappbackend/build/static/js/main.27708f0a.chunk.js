(this.webpackJsonpsomeapp=this.webpackJsonpsomeapp||[]).push([[0],{28:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var s=n(2),c=n.n(s),a=n(12),r=n.n(a),o=n(4),i=n.n(o),u=n(7),l=n(5),j=n(6),d=n.n(j),b="/api/julkaisut",h=null,m={getAll:function(){return d.a.get(b).then((function(e){return e.data}))},create:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:h}},s=d.a.post(b,t,n),e.abrupt("return",s.then((function(e){return e.data})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return d.a.put("".concat(b,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){var t={headers:{Authorization:h}};return d.a.delete("".concat(b,"/").concat(e),t).then((function(e){return e.data}))},setToken:function(e){h="bearer ".concat(e)}},O=(n(28),n(8)),p=n(1),v=function(e){var t=e.posts,n=e.likePost,s=e.user,c=e.removeJulkaisu;return Object(p.jsx)("div",{className:"julkaisu",children:Object(p.jsxs)("div",{className:"content",children:[Object(p.jsx)("h1",{className:"user",children:t.user.username}),Object(p.jsx)("div",{className:"contenttext",children:Object(p.jsxs)("p",{children:[t.content," "]})}),Object(p.jsxs)("div",{className:"buttons",children:[Object(p.jsx)(O.c,{className:"likeButton",onClick:n}),t.likes," likes",Object(p.jsx)("button",{className:"viewButton",children:"View"}),s.username===t.user.username?Object(p.jsx)("button",{className:"viewButton",onClick:c,children:"Delete"}):Object(p.jsx)("div",{})]})]})})},f=function(e){var t=e.posts,n=e.likePost,s=e.removeJulkaisu,c=e.user;return Object(p.jsx)("div",{className:"julkaisut",children:t.map((function(e){return Object(p.jsx)(v,{likePost:function(){return n(e.id)},removeJulkaisu:function(){return s(e.id)},posts:e,user:c},e.id)}))})},x=function(e){var t=e.content,n=e.handleChange,s=e.addJulkaisu,c=e.user;return Object(p.jsxs)("div",{className:"formContainer",children:[Object(p.jsxs)("h1",{className:"formHeader",children:["Hi, ",c.username," !"]}),Object(p.jsxs)("form",{className:"formJulkaisu",children:[Object(p.jsx)("textarea",{maxLength:"200",rows:"5",cols:"30",className:"inputForm",type:"text",value:t,onChange:n,placeholder:"Write text here"}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{className:"julkaisuButton",onClick:s,children:"Lisaa"})})]})]})};var g=function(e){var t=e.user,n=Object(s.useState)([]),c=Object(l.a)(n,2),a=c[0],r=c[1],o=Object(s.useState)(""),i=Object(l.a)(o,2),u=i[0],j=i[1];return Object(s.useEffect)((function(){m.getAll().then((function(e){r(e)}))}),[]),Object(p.jsxs)("div",{className:"main",children:[Object(p.jsx)(x,{content:u,handleChange:function(e){j(e.target.value)},addJulkaisu:function(e){e.preventDefault();var t={content:u,date:(new Date).toISOString(),likes:0};m.create(t).then((function(e){r(a.concat(e)),j("")}))},user:t}),Object(p.jsx)(f,{posts:a,likePost:function(e){var t=a.find((function(t){return t.id===e}));console.log(t);var n=t.likes+1;console.log(n);var s={content:t.content,date:(new Date).toISOString(),likes:n};m.update(e,s).then((function(e){m.getAll().then((function(e){r(e)}))}))},removeJulkaisu:function(e){console.log("joo"),m.remove(e).then((function(e){m.getAll().then((function(e){r(e)}))}))},user:t})]})},k=n(18),N=n(19),w=n(32);function S(e){var t=e.setUser;function n(e){return Object(p.jsxs)("p",{onClick:e.handleClick,className:"menuitem",children:[Object(p.jsx)("span",{className:"dropdownIcon",children:e.leftIcon}),e.children,Object(p.jsx)("span",{className:"dropdownIcon",children:e.rightIcon})]})}return Object(p.jsxs)("div",{className:"dropdown",children:[Object(p.jsx)(n,{leftIcon:Object(p.jsx)(k.b,{}),rightIcon:Object(p.jsx)(N.a,{}),children:"Settings"}),Object(p.jsx)(n,{handleClick:function(e){e.preventDefault(),window.localStorage.removeItem("loggedSomeappUser"),t(null)},leftIcon:Object(p.jsx)(k.a,{}),rightIcon:Object(p.jsx)(N.a,{}),children:"Log out"})]})}function C(e){var t=Object(s.useState)(!1),n=Object(l.a)(t,2),c=n[0],a=n[1],r=e.setUser;return Object(p.jsxs)("li",{className:"navitem",children:[Object(p.jsx)("p",{className:"iconbutton",onClick:function(){return a(!c)},children:e.icon}),c?Object(p.jsx)(S,{setUser:r}):Object(p.jsx)("div",{})]})}function I(e){return Object(p.jsx)("li",{className:"navitem",children:Object(p.jsx)("p",{className:"iconbutton",onClick:e.event,children:e.icon})})}function U(e){return Object(p.jsx)("nav",{className:"nav",children:Object(p.jsx)("ul",{className:"navnav",children:e.children})})}var J=function(e){var t=e.setUser;return Object(p.jsxs)(U,{children:[Object(p.jsx)(C,{setUser:t,icon:Object(p.jsx)(O.b,{})}),Object(p.jsx)(I,{icon:Object(p.jsx)(O.a,{}),event:function(){w.animateScroll.scrollToTop()}})]})},y=function(e){var t=e.handleLogin,n=e.password,s=e.username,c=e.setPassword,a=e.setUsername;return Object(p.jsx)("div",{className:"loginContainer",children:Object(p.jsxs)("div",{className:"loginScreen",children:[Object(p.jsx)("h2",{className:"loginHeader",children:"Login"}),Object(p.jsx)("form",{onSubmit:t,children:Object(p.jsxs)("div",{className:"loginContent",children:[Object(p.jsxs)("div",{children:["username",Object(p.jsx)("input",{className:"usernameInput",type:"text",value:s,name:"Username",onChange:function(e){var t=e.target;return a(t.value)}})]}),Object(p.jsxs)("div",{children:["password",Object(p.jsx)("input",{className:"passwordInput",type:"password",value:n,name:"Password",onChange:function(e){var t=e.target;return c(t.value)}})]}),Object(p.jsx)("button",{className:"loginButton",type:"submit",children:"login"})]})})]})})},A=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var P=function(){var e=Object(s.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(""),r=Object(l.a)(a,2),o=r[0],j=r[1],d=Object(s.useState)(null),b=Object(l.a)(d,2),h=b[0],O=b[1];Object(s.useEffect)((function(){var e=window.localStorage.getItem("loggedSomeappUser");if(e){var t=JSON.parse(e);console.log(t),O(t),m.setToken(t.token)}}),[]);var v=function(){var e=Object(u.a)(i.a.mark((function e(t){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,console.log(A),e.next=5,A({username:n,password:o});case 5:s=e.sent,console.log(s),window.localStorage.setItem("loggedSomeappUser",JSON.stringify(s)),m.setToken(s.token),O(s),console.log(s.username),c(""),j(""),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log("Wrong credentials");case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"App",children:h?Object(p.jsxs)("div",{children:[Object(p.jsx)(J,{setUser:O}),Object(p.jsx)(g,{user:h})]}):Object(p.jsx)(y,{handleLogin:v,password:o,username:n,setPassword:j,setUsername:c})})};r.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(P,{})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.27708f0a.chunk.js.map